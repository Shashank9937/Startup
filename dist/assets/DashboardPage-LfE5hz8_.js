import{g as fe,r as f,i as k,D as me,s as Y,t as O,c as N,d as pe,m as te,a as X,j as s,u as be,b as we,e as A,f as ye,h as xe,n as g,C as v,P as ve,M as P,p as B,k as R,l as De,o as Me,q as Ce}from"./index-CeRVIF18.js";import{R as ke,T as Oe}from"./generateCategoricalChart-IE_EzDv6.js";import{L as Se,a as je}from"./LineChart-Dsxvh9W_.js";var Pe=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;a--!==0;){var c=i[a];if(!t(e[c],n[c]))return!1}return!0}return e!==e&&n!==n};const Te=fe(Pe),j=typeof window<"u"?f.useLayoutEffect:f.useEffect;function Ne(t,e,n){const[r,a]=f.useState(()=>e(t)),i=f.useCallback(()=>{const c=e(t);Te(r,c)||(a(c),n&&n())},[r,t,n]);return j(i),[r,i]}function Ie(t,e,n){const[r,a]=Ne(t,e,n);return j(function(){const c=t.getHandlerId();if(c!=null)return t.subscribeToStateChange(a,{handlerIds:[c]})},[t,a]),r}function ne(t,e,n){return Ie(e,t||(()=>({})),()=>n.reconnect())}function re(t,e){const n=[];return typeof t!="function"&&n.push(t),f.useMemo(()=>typeof t=="function"?t():t,n)}function Re(t){return f.useMemo(()=>t.hooks.dragSource(),[t])}function We(t){return f.useMemo(()=>t.hooks.dragPreview(),[t])}let F=!1,G=!1;class Ee{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){k(!F,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return F=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{F=!1}}isDragging(){if(!this.sourceId)return!1;k(!G,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return G=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{G=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let q=!1;class Ye{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;k(!q,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return q=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{q=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function He(t,e,n){const r=n.getRegistry(),a=r.addTarget(t,e);return[a,()=>r.removeTarget(a)]}function Fe(t,e,n){const r=n.getRegistry(),a=r.addSource(t,e);return[a,()=>r.removeSource(a)]}function $(t,e,n,r){let a;if(a!==void 0)return!!a;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),c=Object.keys(e);if(i.length!==c.length)return!1;const d=Object.prototype.hasOwnProperty.bind(e);for(let p=0;p<i.length;p++){const l=i[p];if(!d(l))return!1;const w=t[l],h=e[l];if(a=void 0,a===!1||a===void 0&&w!==h)return!1}return!0}function Q(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Ge(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function qe(t){return(e=null,n=null)=>{if(!f.isValidElement(e)){const i=e;return t(i,n),i}const r=e;return Ge(r),Le(r,n?i=>t(i,n):t)}}function ae(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const a=qe(r);e[n]=()=>a}}),e}function V(t,e){typeof t=="function"?t(e):t.current=e}function Le(t,e){const n=t.ref;return k(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?f.cloneElement(t,{ref:r=>{V(n,r),V(e,r)}}):f.cloneElement(t,{ref:e})}class Ae{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!$(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!$(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=ae({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,Q(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,Q(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class $e{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!$(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=ae({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,Q(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function I(){const{dragDropManager:t}=f.useContext(me);return k(t!=null,"Expected drag drop context"),t}function Qe(t,e){const n=I(),r=f.useMemo(()=>new Ae(n.getBackend()),[n]);return j(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),j(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function Xe(){const t=I();return f.useMemo(()=>new Ee(t),[t])}class _e{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,a=this.monitor,{isDragging:i}=r;return i?i(a):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:a}=e;a&&a(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function Be(t,e,n){const r=f.useMemo(()=>new _e(t,e,n),[e,n]);return f.useEffect(()=>{r.spec=t},[t]),r}function Ve(t){return f.useMemo(()=>{const e=t.type;return k(e!=null,"spec.type must be defined"),e},[t])}function Je(t,e,n){const r=I(),a=Be(t,e,n),i=Ve(t);j(function(){if(i!=null){const[d,p]=Fe(i,a,r);return e.receiveHandlerId(d),n.receiveHandlerId(d),p}},[r,e,n,a,i])}function Ue(t,e){const n=re(t);k(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=Xe(),a=Qe(n.options,n.previewOptions);return Je(n,r,a),[ne(n.collect,r,a),Re(a),We(a)]}function Ke(t){return f.useMemo(()=>t.hooks.dropTarget(),[t])}function ze(t){const e=I(),n=f.useMemo(()=>new $e(e.getBackend()),[e]);return j(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function Ze(){const t=I();return f.useMemo(()=>new Ye(t),[t])}function et(t){const{accept:e}=t;return f.useMemo(()=>(k(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class tt{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function nt(t,e){const n=f.useMemo(()=>new tt(t,e),[e]);return f.useEffect(()=>{n.spec=t},[t]),n}function rt(t,e,n){const r=I(),a=nt(t,e),i=et(t);j(function(){const[d,p]=He(i,a,r);return e.receiveHandlerId(d),n.receiveHandlerId(d),p},[r,e,a,n,i.map(c=>c.toString()).join("|")])}function at(t,e){const n=re(t),r=Ze(),a=ze(n.options);return rt(n,r,a),[ne(n.collect,r,a),Ke(a)]}function H(t,e){return Y(t,{...e,weekStartsOn:1})}function se(t,e){const n=O(t,e?.in),r=n.getFullYear(),a=N(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=H(a),c=N(n,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const d=H(c);return n.getTime()>=i.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function st(t,e){const n=se(t,e),r=N(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),H(r)}function ot(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function it(t){return!(!ot(t)&&typeof t!="number"||isNaN(+O(t)))}function ct(t,e){const n=O(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ut={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dt=(t,e,n)=>{let r;const a=ut[t];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function L(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const lt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ht={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ft={date:L({formats:lt,defaultWidth:"full"}),time:L({formats:ht,defaultWidth:"full"}),dateTime:L({formats:gt,defaultWidth:"full"})},mt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pt=(t,e,n,r)=>mt[t];function W(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let a;if(r==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,d=n?.width?String(n.width):c;a=t.formattingValues[d]||t.formattingValues[c]}else{const c=t.defaultWidth,d=n?.width?String(n.width):t.defaultWidth;a=t.values[d]||t.values[c]}const i=t.argumentCallback?t.argumentCallback(e):e;return a[i]}}const bt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Dt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Mt=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Ct={ordinalNumber:Mt,era:W({values:bt,defaultWidth:"wide"}),quarter:W({values:wt,defaultWidth:"wide",argumentCallback:t=>t-1}),month:W({values:yt,defaultWidth:"wide"}),day:W({values:xt,defaultWidth:"wide"}),dayPeriod:W({values:vt,defaultWidth:"wide",formattingValues:Dt,defaultFormattingWidth:"wide"})};function E(t){return(e,n={})=>{const r=n.width,a=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(a);if(!i)return null;const c=i[0],d=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(d)?Ot(d,h=>h.test(c)):kt(d,h=>h.test(c));let l;l=t.valueCallback?t.valueCallback(p):p,l=n.valueCallback?n.valueCallback(l):l;const w=e.slice(c.length);return{value:l,rest:w}}}function kt(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Ot(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function St(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const a=r[0],i=e.match(t.parsePattern);if(!i)return null;let c=t.valueCallback?t.valueCallback(i[0]):i[0];c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(a.length);return{value:c,rest:d}}}const jt=/^(\d+)(th|st|nd|rd)?/i,Pt=/\d+/i,Tt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Nt={any:[/^b/i,/^(a|c)/i]},It={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Rt={any:[/1/i,/2/i,/3/i,/4/i]},Wt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Et={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Yt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ht={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ft={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qt={ordinalNumber:St({matchPattern:jt,parsePattern:Pt,valueCallback:t=>parseInt(t,10)}),era:E({matchPatterns:Tt,defaultMatchWidth:"wide",parsePatterns:Nt,defaultParseWidth:"any"}),quarter:E({matchPatterns:It,defaultMatchWidth:"wide",parsePatterns:Rt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:E({matchPatterns:Wt,defaultMatchWidth:"wide",parsePatterns:Et,defaultParseWidth:"any"}),day:E({matchPatterns:Yt,defaultMatchWidth:"wide",parsePatterns:Ht,defaultParseWidth:"any"}),dayPeriod:E({matchPatterns:Ft,defaultMatchWidth:"any",parsePatterns:Gt,defaultParseWidth:"any"})},Lt={code:"en-US",formatDistance:dt,formatLong:ft,formatRelative:pt,localize:Ct,match:qt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function At(t,e){const n=O(t,e?.in);return pe(n,ct(n))+1}function $t(t,e){const n=O(t,e?.in),r=+H(n)-+st(n);return Math.round(r/te)+1}function oe(t,e){const n=O(t,e?.in),r=n.getFullYear(),a=X(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,c=N(e?.in||t,0);c.setFullYear(r+1,0,i),c.setHours(0,0,0,0);const d=Y(c,e),p=N(e?.in||t,0);p.setFullYear(r,0,i),p.setHours(0,0,0,0);const l=Y(p,e);return+n>=+d?r+1:+n>=+l?r:r-1}function Qt(t,e){const n=X(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=oe(t,e),i=N(e?.in||t,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Y(i,e)}function Xt(t,e){const n=O(t,e?.in),r=+Y(n,e)-+Qt(n,e);return Math.round(r/te)+1}function m(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const C={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return m(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):m(n+1,2)},d(t,e){return m(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return m(t.getHours()%12||12,e.length)},H(t,e){return m(t.getHours(),e.length)},m(t,e){return m(t.getMinutes(),e.length)},s(t,e){return m(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return m(a,e.length)}},T={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},J={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return C.y(t,e)},Y:function(t,e,n,r){const a=oe(t,r),i=a>0?a:1-a;if(e==="YY"){const c=i%100;return m(c,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):m(i,e.length)},R:function(t,e){const n=se(t);return m(n,e.length)},u:function(t,e){const n=t.getFullYear();return m(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return m(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return m(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return C.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return m(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const a=Xt(t,r);return e==="wo"?n.ordinalNumber(a,{unit:"week"}):m(a,e.length)},I:function(t,e,n){const r=$t(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):m(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):C.d(t,e)},D:function(t,e,n){const r=At(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):m(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return m(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const a=t.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return m(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),a=r===0?7:r;switch(e){case"i":return String(a);case"ii":return m(a,e.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let a;switch(r===12?a=T.noon:r===0?a=T.midnight:a=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let a;switch(r>=17?a=T.evening:r>=12?a=T.afternoon:r>=4?a=T.morning:a=T.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return C.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):C.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):m(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):m(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):C.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):C.s(t,e)},S:function(t,e){return C.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return K(r);case"XXXX":case"XX":return S(r);case"XXXXX":case"XXX":default:return S(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return K(r);case"xxxx":case"xx":return S(r);case"xxxxx":case"xxx":default:return S(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+U(r,":");case"OOOO":default:return"GMT"+S(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+U(r,":");case"zzzz":default:return"GMT"+S(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return m(r,e.length)},T:function(t,e,n){return m(+t,e.length)}};function U(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+e+m(i,2)}function K(t,e){return t%60===0?(t>0?"-":"+")+m(Math.abs(t)/60,2):S(t,e)}function S(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),a=m(Math.trunc(r/60),2),i=m(r%60,2);return n+a+e+i}const z=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ie=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},_t=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return z(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",z(r,e)).replace("{{time}}",ie(a,e))},Bt={p:ie,P:_t},Vt=/^D+$/,Jt=/^Y+$/,Ut=["D","DD","YY","YYYY"];function Kt(t){return Vt.test(t)}function zt(t){return Jt.test(t)}function Zt(t,e,n){const r=en(t,e,n);if(console.warn(r),Ut.includes(t))throw new RangeError(r)}function en(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const tn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rn=/^'([^]*?)'?$/,an=/''/g,sn=/[a-zA-Z]/;function Z(t,e,n){const r=X(),a=r.locale??Lt,i=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,c=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,d=O(t,n?.in);if(!it(d))throw new RangeError("Invalid time value");let p=e.match(nn).map(w=>{const h=w[0];if(h==="p"||h==="P"){const M=Bt[h];return M(w,a.formatLong)}return w}).join("").match(tn).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const h=w[0];if(h==="'")return{isToken:!1,value:on(w)};if(J[h])return{isToken:!0,value:w};if(h.match(sn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(p=a.localize.preprocessor(d,p));const l={firstWeekContainsDate:i,weekStartsOn:c,locale:a};return p.map(w=>{if(!w.isToken)return w.value;const h=w.value;(zt(h)||Kt(h))&&Zt(h,e,String(t));const M=J[h[0]];return M(d,h,a.localize,l)}).join("")}function on(t){const e=t.match(rn);return e?e[1].replace(an,"'"):t}const ee="goal-card";function cn({item:t,index:e,move:n,onToggle:r,onChange:a,onRemove:i,limitReached:c}){const d=f.useRef(null),[,p]=at({accept:ee,hover(h){d.current&&h.index!==e&&(n(h.index,e),h.index=e)}}),[{isDragging:l},w]=Ue({type:ee,item:{index:e},collect:h=>({isDragging:h.isDragging()})});return w(p(d)),s.jsxs("div",{ref:d,className:`flex items-center gap-2 rounded-xl border border-slate-200 dark:border-slate-700 p-2 bg-white dark:bg-slate-900 ${l?"opacity-50":""}`,role:"listitem",children:[s.jsx("span",{className:"cursor-grab text-slate-400","aria-hidden":!0,children:"⋮⋮"}),s.jsx("input",{type:"checkbox",checked:t.done,onChange:h=>r(t.id,h.target.checked),"aria-label":"toggle goal completion"}),s.jsx("input",{className:"flex-1 rounded-md bg-transparent border border-slate-200 dark:border-slate-700 px-2 py-1",value:t.text,onChange:h=>a(t.id,h.target.value),placeholder:"Goal description"}),s.jsx("button",{className:"text-xs text-rose-500",onClick:()=>i(t.id),children:"Delete"}),s.jsx("span",{className:"text-xs text-slate-500",children:e+1})]})}function un({goals:t,onReorder:e,onToggle:n,onChange:r,onRemove:a,onAdd:i}){const c=f.useMemo(()=>t.length<3,[t.length]);return s.jsxs("div",{className:"space-y-2",role:"list","aria-label":"Weekly top goals",children:[t.map((d,p)=>s.jsx(cn,{item:d,index:p,move:e,onToggle:n,onChange:r,onRemove:a,limitReached:!c},d.id)),s.jsx("button",{disabled:!c,className:"w-full rounded-lg px-3 py-2 text-sm border border-dashed border-slate-300 dark:border-slate-700 disabled:opacity-50",onClick:i,children:"+ Add Goal (max 3)"})]})}function dn(t){return t==="danger"?"danger":t==="warning"?"warning":"success"}function ln(t){if(!t?.length)return 0;const e=new Set(t);let n=0;const r=new Date;for(;;){const a=A(r);if(!e.has(a))break;n+=1,r.setDate(r.getDate()-1)}return n}function mn(){const{state:t,mutate:e,generateWeeklyReview:n}=be(),r=we(),[a,i]=f.useState(!1),[c,d]=f.useState({date:A(),mrr:0,arr:0,customers:0,wau:0,retention:0,momGrowth:0,runway:0,conversations:0,burnRate:0,churn:0,nrr:0,cac:0,ltv:0,payback:0,grossMargin:0,magicNumber:0,northStar:0,newCustomers:0}),p=f.useMemo(()=>[...t.metrics.snapshots].sort((o,u)=>o.date.localeCompare(u.date)),[t.metrics.snapshots]),l=p.at(-1)||{},w=ye(t.profile.startDate),h=xe(t.profile.startDate),M=t.dashboard.weeklyGoals.filter(o=>o.done).length,ce=[...t.dashboard.deadlines].sort((o,u)=>o.date.localeCompare(u.date)),D={booksRead:t.learning.books.filter(o=>o.status==="Complete").length,modelsMastered:t.knowledge.mentalModels.filter(o=>Number(o.mastery)>=7).length,aiHoursSaved:t.ai.hoursSavedLogs.reduce((o,u)=>o+(Number(u.withoutAi)-Number(u.withAi)),0),decisionsLogged:t.decisions.items.length},ue=f.useMemo(()=>ln(t.knowledge.dailyJournal.map(o=>o.date)),[t.knowledge.dailyJournal]),de=f.useMemo(()=>{let o=0;for(let u=p.length-1;u>=0&&g(p[u].conversations)>=25;u-=1)o+=1;return o},[p]),le=f.useMemo(()=>{const o=[];return g(l.conversations)<25&&o.push({id:"cust-convos",tone:"warning",text:"Customer conversations below 25/week. Schedule 5 calls/day until this target is met."}),g(l.runway)<6&&o.push({id:"runway-risk",tone:"danger",text:"Runway below 6 months. Cut non-core burn and accelerate revenue collection immediately."}),h<=2&&t.knowledge.interviews.length<25&&o.push({id:"validation",tone:"warning",text:`Month ${h} requires deep validation. Complete at least ${25-t.knowledge.interviews.length} additional interviews.`}),M<2&&o.push({id:"weekly-focus",tone:"warning",text:"Weekly goals are slipping. Reduce WIP and lock next 48 hours to top one outcome."}),o.length||o.push({id:"on-track",tone:"success",text:"Execution looks on track. Keep compounding and push one decisive growth experiment this week."}),o.slice(0,3)},[l,h,t.knowledge.interviews.length,M]),_=f.useMemo(()=>{const o=[];return g(l.conversations)>=25&&o.push("Voice of Customer: 25+ calls in a week"),D.booksRead>=10&&o.push("Learning Engine: 10+ books completed"),D.modelsMastered>=15&&o.push("Model Thinker: 15+ models mastered"),D.aiHoursSaved>=50&&o.push("AI Leverage: 50+ hours saved"),D.decisionsLogged>=25&&o.push("Decision Cadence: 25+ decisions logged"),g(l.momGrowth)>=20&&o.push("Traction Sprint: 20%+ MoM growth"),o},[l,D]),he=()=>{const o=l||{};d({date:A(),mrr:g(o.mrr),arr:g(o.arr),customers:g(o.customers),wau:g(o.wau),retention:g(o.retention),momGrowth:g(o.momGrowth),runway:g(o.runway),conversations:g(o.conversations),burnRate:g(o.burnRate),churn:g(o.churn),nrr:g(o.nrr),cac:g(o.cac),ltv:g(o.ltv),payback:g(o.payback),grossMargin:g(o.grossMargin),magicNumber:g(o.magicNumber),northStar:g(o.northStar),newCustomers:g(o.newCustomers)}),i(!0)},ge=()=>{e(o=>{const u=o.metrics.snapshots.find(b=>b.date===c.date),y={...c,arr:g(c.arr)||g(c.mrr)*12,id:u?.id||`snapshot_${Date.now()}`};u?Object.assign(u,y):o.metrics.snapshots.push(y)}),i(!1)};return s.jsxs("div",{className:"space-y-4",children:[s.jsx(v,{title:`Day ${w} of 365`,subtitle:`${Z(new Date,"EEEE, MMMM d, yyyy")} • Month ${h} of 12`,children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-300",children:[s.jsx("span",{children:"Journey progress"}),s.jsxs("span",{children:[Math.round(w/365*100),"%"]})]}),s.jsx(ve,{value:w/365*100})]})}),s.jsxs(v,{title:"Hero Metrics",subtitle:"Traction, efficiency, and execution health",children:[s.jsxs("div",{className:"grid-cards",children:[s.jsx(P,{label:"MRR / ARR",value:`${R(l.mrr)} / ${R(l.arr)}`,helper:`${B(l.momGrowth)} MoM growth`}),s.jsx(P,{label:"Customers",value:l.customers||0,helper:`+${l.newCustomers||0} this month`}),s.jsx(P,{label:"WAU / Retention",value:`${l.wau||0} / ${B(l.retention||0)}`,helper:"Weekly active users"}),s.jsx(P,{label:"Runway",value:`${l.runway||0} months`,helper:`Burn ${R(l.burnRate||0)}/mo`,tone:dn(De(l.runway))}),s.jsx(P,{label:"Customer Conversations",value:l.conversations||0,helper:"Target: 25+ / week",tone:(l.conversations||0)>=25?"success":"warning"}),s.jsx(P,{label:"Burn Rate",value:R(l.burnRate||0),helper:"Monthly net burn",tone:"warning"})]}),s.jsx("div",{className:"h-24 mt-4 rounded-xl bg-slate-50 dark:bg-slate-800/60 p-2 border border-slate-200 dark:border-slate-700",children:s.jsx(ke,{width:"100%",height:"100%",children:s.jsxs(Se,{data:p.slice(-12),children:[s.jsx(je,{type:"monotone",dataKey:"mrr",stroke:"#2563eb",strokeWidth:2.2,dot:!1}),s.jsx(Oe,{formatter:o=>R(o),labelFormatter:o=>o})]})})})]}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[s.jsx(v,{title:"Weekly Top 3 Goals",subtitle:`${M}/${t.dashboard.weeklyGoals.length} completed`,className:"lg:col-span-2",children:s.jsx(un,{goals:t.dashboard.weeklyGoals,onReorder:(o,u)=>e(y=>{y.dashboard.weeklyGoals=Me(y.dashboard.weeklyGoals,o,u)}),onToggle:(o,u)=>e(y=>{const b=y.dashboard.weeklyGoals.find(x=>x.id===o);b&&(b.done=u)}),onChange:(o,u)=>e(y=>{const b=y.dashboard.weeklyGoals.find(x=>x.id===o);b&&(b.text=u)}),onRemove:o=>e(u=>{u.dashboard.weeklyGoals=u.dashboard.weeklyGoals.filter(y=>y.id!==o)}),onAdd:()=>e(o=>{o.dashboard.weeklyGoals.length<3&&o.dashboard.weeklyGoals.push({id:`goal_${Date.now()}`,text:"New weekly goal",done:!1})})})}),s.jsx(v,{title:"Today’s Priorities",subtitle:"Max 3 focused outcomes",children:s.jsx("div",{className:"space-y-2",children:t.dashboard.priorities.map(o=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:o.done,onChange:u=>e(y=>{const b=y.dashboard.priorities.find(x=>x.id===o.id);b&&(b.done=u.target.checked)})}),s.jsx("input",{value:o.text,onChange:u=>e(y=>{const b=y.dashboard.priorities.find(x=>x.id===o.id);b&&(b.text=u.target.value)}),className:"input"})]},o.id))})})]}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[s.jsx(v,{title:"Smart Suggestions",subtitle:"AI-powered next best actions based on phase + metrics",className:"lg:col-span-2",children:s.jsx("div",{className:"space-y-2",children:le.map(o=>s.jsx("div",{className:`rounded-lg border p-2 text-sm ${o.tone==="danger"?"border-rose-300 bg-rose-50 dark:border-rose-700/50 dark:bg-rose-900/20":o.tone==="warning"?"border-amber-300 bg-amber-50 dark:border-amber-700/50 dark:bg-amber-900/20":"border-emerald-300 bg-emerald-50 dark:border-emerald-700/50 dark:bg-emerald-900/20"}`,children:o.text},o.id))})}),s.jsxs(v,{title:"Momentum",subtitle:"Streaks and achievement cues",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Journal streak"}),s.jsxs("strong",{children:[ue," days"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Convo target streak"}),s.jsxs("strong",{children:[de," weeks"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Goal completion"}),s.jsxs("strong",{children:[Math.round(M/Math.max(1,t.dashboard.weeklyGoals.length)*100),"%"]})]})]}),s.jsx("div",{className:"mt-3 space-y-1",children:_.length===0?s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"No badges unlocked yet. Keep compounding."}):_.slice(0,3).map(o=>s.jsx("div",{className:"text-xs rounded-full px-2 py-1 bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300",children:o},o))})]})]}),s.jsxs(v,{title:"Weekly Operating Rhythm",subtitle:"Monday planning to Friday review discipline",children:[s.jsx("div",{className:"grid gap-2 md:grid-cols-2",children:t.dashboard.operatingRhythm.map(o=>s.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-2 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("p",{className:"font-medium text-sm",children:[o.day,": ",o.focus]}),s.jsxs("label",{className:"text-xs flex items-center gap-1",children:[s.jsx("input",{type:"checkbox",checked:o.done,onChange:u=>e(y=>{const b=y.dashboard.operatingRhythm.find(x=>x.id===o.id);b&&(b.done=u.target.checked)})})," Done"]})]}),s.jsx("input",{className:"input",value:o.target,onChange:u=>e(y=>{const b=y.dashboard.operatingRhythm.find(x=>x.id===o.id);b&&(b.target=u.target.value)}),placeholder:"Target for the day"}),s.jsx("textarea",{className:"textarea",value:o.log,onChange:u=>e(y=>{const b=y.dashboard.operatingRhythm.find(x=>x.id===o.id);b&&(b.log=u.target.value)}),placeholder:"Log outcomes, calls, ship notes"})]},o.id))}),s.jsx("div",{className:"mt-3",children:s.jsx("button",{className:"btn-secondary",onClick:n,children:"Generate Weekly Review Summary"})})]}),s.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[s.jsx(v,{title:"Upcoming Deadlines & Milestones",className:"lg:col-span-2",children:s.jsx("div",{className:"space-y-2",children:ce.map(o=>s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded-lg border border-slate-200 dark:border-slate-700 p-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:o.title}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Due ",Z(new Date(o.date),"MMM d, yyyy")]})]}),s.jsxs("select",{className:"select w-auto",value:o.status,onChange:u=>e(y=>{const b=y.dashboard.deadlines.find(x=>x.id===o.id);b&&(b.status=u.target.value)}),children:[s.jsx("option",{value:"not_started",children:"Not Started"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"complete",children:"Complete"})]})]},o.id))})}),s.jsx(v,{title:"Quick Stats",subtitle:"Compounding indicators",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Books read"}),s.jsx("strong",{children:D.booksRead})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Mental models mastered"}),s.jsx("strong",{children:D.modelsMastered})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"AI hours saved"}),s.jsxs("strong",{children:[D.aiHoursSaved.toFixed(1),"h"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Decisions logged"}),s.jsx("strong",{children:D.decisionsLogged})]})]})})]}),s.jsx(v,{title:"Quick Actions",children:s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[s.jsx("button",{className:"btn-secondary",onClick:he,children:"Log Metric"}),s.jsx("button",{className:"btn-secondary",onClick:()=>r("/execution"),children:"Add Task"}),s.jsx("button",{className:"btn-secondary",onClick:()=>r("/learning"),children:"Record Learning"}),s.jsx("button",{className:"btn-secondary",onClick:()=>r("/decisions"),children:"Make Decision"})]})}),s.jsxs(Ce,{open:a,title:"Log Metric Snapshot",onClose:()=>i(!1),children:[s.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[s.jsxs("label",{children:[s.jsx("span",{className:"label",children:"Date"}),s.jsx("input",{className:"input",type:"date",value:c.date,onChange:o=>d(u=>({...u,date:o.target.value}))})]}),s.jsxs("label",{children:[s.jsx("span",{className:"label",children:"MRR"}),s.jsx("input",{className:"input",type:"number",value:c.mrr,onChange:o=>d(u=>({...u,mrr:g(o.target.value)}))})]}),s.jsxs("label",{children:[s.jsx("span",{className:"label",children:"Customers"}),s.jsx("input",{className:"input",type:"number",value:c.customers,onChange:o=>d(u=>({...u,customers:g(o.target.value)}))})]}),s.jsxs("label",{children:[s.jsx("span",{className:"label",children:"WAU"}),s.jsx("input",{className:"input",type:"number",value:c.wau,onChange:o=>d(u=>({...u,wau:g(o.target.value)}))})]}),s.jsxs("label",{children:[s.jsx("span",{className:"label",children:"MoM Growth %"}),s.jsx("input",{className:"input",type:"number",value:c.momGrowth,onChange:o=>d(u=>({...u,momGrowth:g(o.target.value)}))})]}),s.jsxs("label",{children:[s.jsx("span",{className:"label",children:"Runway (months)"}),s.jsx("input",{className:"input",type:"number",value:c.runway,onChange:o=>d(u=>({...u,runway:g(o.target.value)}))})]}),s.jsxs("label",{children:[s.jsx("span",{className:"label",children:"Conversations"}),s.jsx("input",{className:"input",type:"number",value:c.conversations,onChange:o=>d(u=>({...u,conversations:g(o.target.value)}))})]}),s.jsxs("label",{children:[s.jsx("span",{className:"label",children:"Burn Rate"}),s.jsx("input",{className:"input",type:"number",value:c.burnRate,onChange:o=>d(u=>({...u,burnRate:g(o.target.value)}))})]}),s.jsxs("label",{children:[s.jsx("span",{className:"label",children:"New Customers"}),s.jsx("input",{className:"input",type:"number",value:c.newCustomers,onChange:o=>d(u=>({...u,newCustomers:g(o.target.value)}))})]})]}),s.jsxs("div",{className:"mt-3 flex gap-2 justify-end",children:[s.jsx("button",{className:"btn-secondary",onClick:()=>i(!1),children:"Cancel"}),s.jsx("button",{className:"btn-primary",onClick:ge,children:"Save Snapshot"})]})]})]})}export{mn as default};
