import{u as j,r as h,j as e,C as u,P as f,S as b}from"./index-CeRVIF18.js";function N(l){const a=l.weeks.flatMap(c=>c.tasks),x=a.length+l.exitCriteria.length+l.activities.length,g=a.filter(c=>c.done).length+l.exitCriteria.filter(c=>c.done).length+l.activities.filter(c=>c.done).length;return x?Math.round(g/x*100):0}function k({months:l}){return e.jsx("div",{className:"space-y-2",children:l.map(a=>e.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsxs("span",{children:["Month ",a.month," • ",a.title]}),e.jsxs("span",{children:[a.progress,"%"]})]}),e.jsx("div",{className:"h-3 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:e.jsx("div",{className:`h-full ${a.progress<40?"bg-rose-500":a.progress<75?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${a.progress}%`}})}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Critical path: ",a.milestones.filter(x=>x.critical).map(x=>x.title).join(" • ")||"No critical milestones"]})]},`timeline_${a.id}`))})}function C(){const{state:l,mutate:a}=j(),[x,g]=h.useState(1),c=h.useMemo(()=>l.roadmap.months.map(t=>({...t,progress:N(t)})),[l.roadmap.months]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{title:"Execution Roadmap (12-Month System)",subtitle:"Track week-by-week outputs, exit gates, and dependencies",children:e.jsx(k,{months:c})}),c.map(t=>e.jsx(u,{title:`Month ${t.month}: ${t.title}`,subtitle:`${t.progress}% complete`,action:e.jsx(b,{value:t.status}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{value:t.progress}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>g(s=>s===t.month?-1:t.month),children:x===t.month?"Collapse":"Expand"}),e.jsxs("select",{className:"select w-auto",value:t.status,onChange:s=>a(r=>{const d=r.roadmap.months.find(o=>o.id===t.id);d&&(d.status=s.target.value)}),children:[e.jsx("option",{children:"Not Started"}),e.jsx("option",{children:"In Progress"}),e.jsx("option",{children:"Complete"}),e.jsx("option",{children:"Blocked"})]}),t.aiActions.map(s=>e.jsxs("button",{className:"btn-secondary text-xs",title:"Opens AI workflows page for execution support",children:["AI: ",s]},s))]}),x===t.month?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("section",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-3 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Week-by-week breakdown"}),t.weeks.map(s=>e.jsxs("details",{className:"rounded-md border border-slate-200 dark:border-slate-700 p-2",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-medium",children:s.title}),e.jsx("div",{className:"mt-2 space-y-1",children:s.tasks.map(r=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:r.done,onChange:d=>a(o=>{const m=o.roadmap.months.find(p=>p.id===t.id)?.weeks.find(p=>p.id===s.id)?.tasks.find(p=>p.id===r.id);m&&(m.done=d.target.checked)})}),e.jsx("span",{children:r.text})]},r.id))})]},s.id))]}),e.jsxs("section",{className:"rounded-xl border border-slate-200 dark:border-slate-700 p-3 space-y-2",children:[e.jsx("h4",{className:"font-semibold text-sm",children:"Exit criteria"}),t.exitCriteria.map(s=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:s.done,onChange:r=>a(d=>{const n=d.roadmap.months.find(i=>i.id===t.id)?.exitCriteria.find(i=>i.id===s.id);n&&(n.done=r.target.checked)})}),e.jsx("span",{children:s.text})]},s.id)),e.jsx("h4",{className:"font-semibold text-sm mt-3",children:"Key activities"}),t.activities.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.done,onChange:r=>a(d=>{const n=d.roadmap.months.find(i=>i.id===t.id)?.activities.find(i=>i.id===s.id);n&&(n.done=r.target.checked)})}),e.jsx("input",{className:"input",value:s.text,onChange:r=>a(d=>{const n=d.roadmap.months.find(i=>i.id===t.id)?.activities.find(i=>i.id===s.id);n&&(n.text=r.target.value)})}),e.jsx("input",{type:"date",className:"input w-auto",value:s.dueDate,onChange:r=>a(d=>{const n=d.roadmap.months.find(i=>i.id===t.id)?.activities.find(i=>i.id===s.id);n&&(n.dueDate=r.target.value)})})]},s.id))]})]}),e.jsxs("section",{className:"rounded-xl border border-rose-200 dark:border-rose-800/50 p-3 bg-rose-50/60 dark:bg-rose-950/25",children:[e.jsx("h4",{className:"font-semibold text-sm text-rose-700 dark:text-rose-300",children:"Kill criteria warnings"}),t.killCriteria.map(s=>e.jsxs("label",{className:"flex items-center gap-2 text-sm mt-1",children:[e.jsx("input",{type:"checkbox",checked:s.triggered,onChange:r=>a(d=>{const n=d.roadmap.months.find(i=>i.id===t.id)?.killCriteria.find(i=>i.id===s.id);n&&(n.triggered=r.target.checked)})}),s.text]},s.id))]}),e.jsxs("section",{children:[e.jsx("label",{className:"label",children:"Notes & Pivot Considerations"}),e.jsx("textarea",{className:"textarea min-h-24",value:t.notes,onChange:s=>a(r=>{const d=r.roadmap.months.find(o=>o.id===t.id);d&&(d.notes=s.target.value)})})]})]}):null]})},t.id))]})}export{C as default};
